Добрый день.
Хороший вариант решения.

В первом задании в файле purchase_log.txt можно пропустить первую строку с “заголовком” с помощью next(f) или f.readline().

Также лучше не считывать содержимое файла purchase_log.txt в оперативную память в строчке file = f.readlines(). 
А читать файл построчно:

1
2
3
4
with open('purchase_log.txt') as f:
    f.readline()
    for line in f:
		    # остальной код
По условию файл purchase_log.txt помещается в оперативную память. Но не факт, что 
памяти хватит еще и на словарь purchases, который тоже может получиться большим.